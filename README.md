# IVAO Morocco Division Website

Official website for the IVAO Morocco Division, built with Laravel 12 and featuring a modern, glassmorphic design with Moroccan brand accents.

![IVAO Morocco](public/images/logo-white.png)

## Features

- **Modern Design**: Glassmorphism effects with IVAO Blue and Moroccan Red/Green accents
- **Live Network Data**: Real-time display of departures/arrivals from Moroccan airports via IVAO API
- **Admin Panel**: Filament-powered admin interface for content management
- **Multi-language Support**: English and French localization
- **Responsive Layout**: Mobile-first design with Tailwind CSS
- **Dynamic Content**: Events, airports, wiki articles, and virtual airlines management

## Tech Stack

- **Backend**: Laravel 12.x (PHP 8.3+)
- **Frontend**: Tailwind CSS 4.x, Alpine.js
- **Build Tool**: Vite 7.x
- **Database**: SQLite (default) / MySQL / PostgreSQL
- **Admin Panel**: Filament 3.x

## Prerequisites

Before you begin, ensure you have the following installed:

- **PHP** >= 8.3
- **Composer** >= 2.x
- **Node.js** >= 20.x
- **npm** >= 10.x
- **SQLite** (or MySQL/PostgreSQL if preferred)

## Installation

### 1. Clone the Repository

```bash
git clone <repository-url>
cd ivao-ma
```

### 2. Install PHP Dependencies

```bash
composer install
```

### 3. Install Node Dependencies

```bash
npm install
```

### 4. Environment Configuration

Copy the example environment file:

```bash
cp .env.example .env
```

Generate application key:

```bash
php artisan key:generate
```

**Configure your `.env` file:**

```env
APP_NAME="IVAO Morocco"
APP_ENV=local
APP_KEY=base64:... # Generated by artisan key:generate
APP_DEBUG=true
APP_URL=http://localhost:8000

# Database (SQLite by default)
DB_CONNECTION=sqlite
# DB_DATABASE=/absolute/path/to/database.sqlite

# For MySQL/PostgreSQL, uncomment and configure:
# DB_CONNECTION=mysql
# DB_HOST=127.0.0.1
# DB_PORT=3306
# DB_DATABASE=ivao_ma
# DB_USERNAME=root
# DB_PASSWORD=
```

### 5. Database Setup

Create the SQLite database file:

```bash
touch database/database.sqlite
```

Run migrations and seeders:

```bash
php artisan migrate --seed
```

### 6. Storage Setup

Create symbolic link for storage:

```bash
php artisan storage:link
```

### 7. Build Frontend Assets

For development:

```bash
npm run dev
```

For production:

```bash
npm run build
```

### 8. Start the Development Server

```bash
php artisan serve
```

The application will be available at `http://localhost:8000`

## Admin Panel Access

Access the Filament admin panel at:

```
http://localhost:8000/admin
```

**Default Admin Credentials** (if seeded):
- Email: `admin@ivao.ma`
- Password: `password`

> **Important**: Change the default password immediately in production!

## Project Structure

```
ivao-ma/
├── app/
│   ├── Filament/          # Admin panel resources
│   ├── Http/Controllers/  # Application controllers
│   ├── Models/            # Eloquent models
│   └── Services/          # Business logic (e.g., IvaoFlightsService)
├── database/
│   ├── migrations/        # Database migrations
│   └── seeders/           # Database seeders
├── public/
│   ├── images/            # Public images (logos, hero, etc.)
│   └── build/             # Compiled assets (generated)
├── resources/
│   ├── css/               # Stylesheets
│   ├── js/                # JavaScript files
│   └── views/             # Blade templates
├── routes/
│   └── web.php            # Web routes
└── storage/
    └── app/               # Application storage
```

## Key Components

### IVAO Live Network Widget

The homepage features a live widget displaying real-time flight data from Moroccan airports:

- **Service**: `App\Services\IvaoFlightsService`
- **Controller**: `App\Http\Controllers\IvaoController`
- **Route**: `POST /ivao/refresh`
- **API**: IVAO Whazzup API v2

The widget auto-refreshes every 60 seconds and caches data for 55 seconds to optimize API calls.

### Moroccan Airports Tracked

GMMN, GMME, GMMX, GMFF, GMAD, GMMT, GMMI, GMML, GMFM, GMFO, GMTA, and all airports starting with "GM".

## Development

### Running in Development Mode

Terminal 1 - Laravel Server:
```bash
php artisan serve
```

Terminal 2 - Vite Dev Server:
```bash
npm run dev
```

### Code Style

The project follows Laravel and PSR-12 coding standards. Format code using:

```bash
composer format  # If configured
```

### Clearing Cache

```bash
php artisan cache:clear
php artisan config:clear
php artisan route:clear
php artisan view:clear
```

## Deployment

### Production Build

1. Set environment to production in `.env`:
```env
APP_ENV=production
APP_DEBUG=false
```

2. Build assets:
```bash
npm run build
```

3. Optimize Laravel:
```bash
php artisan config:cache
php artisan route:cache
php artisan view:cache
```

4. Set proper permissions:
```bash
chmod -R 775 storage bootstrap/cache
```

### Web Server Configuration

#### Apache

Ensure `mod_rewrite` is enabled and point document root to `/public`.

#### Nginx

```nginx
server {
    listen 80;
    server_name your-domain.com;
    root /path/to/ivao-ma/public;

    add_header X-Frame-Options "SAMEORIGIN";
    add_header X-Content-Type-Options "nosniff";

    index index.php;

    charset utf-8;

    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    location = /favicon.ico { access_log off; log_not_found off; }
    location = /robots.txt  { access_log off; log_not_found off; }

    error_page 404 /index.php;

    location ~ \.php$ {
        fastcgi_pass unix:/var/run/php/php8.3-fpm.sock;
        fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;
        include fastcgi_params;
    }

    location ~ /\.(?!well-known).* {
        deny all;
    }
}
```

## Troubleshooting

### "View not found" Error

Clear compiled views:
```bash
php artisan view:clear
```

### Assets Not Loading

Rebuild assets:
```bash
npm run build
```

### Database Connection Issues

Verify `.env` database settings and ensure the database file/server is accessible.

### Permission Errors

```bash
sudo chown -R www-data:www-data storage bootstrap/cache
sudo chmod -R 775 storage bootstrap/cache
```

## Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## License

This project is proprietary software for IVAO Morocco Division.

## Support

For issues or questions:
- **Discord**: [IVAO Morocco Discord](#)
- **Forum**: [IVAO Morocco Forum](#)
- **Email**: support@ivao.ma

---

Built with ❤️ by the IVAO Morocco Division Team
